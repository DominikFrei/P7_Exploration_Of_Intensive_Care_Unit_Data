---
title: "P7_Survival_After_Indwelling_Arterial_Catheters_Use"
author: "Dominik Frei"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Code

## Set up

Libraries:
```{r}
library(tidyverse)
```

Load in the data set:
```{r}
data <- read.csv(file = "Data/full_cohort_data.csv",
                 stringsAsFactors = TRUE)
```

Convert all the binary variables into factors:
```{r}
for (i in 1:ncol(data)) {
        if(length(unique(data[,i])) == 2) {
                data[,i] <- as.factor(data[,i])
        }
}
```


Display the data structure as imported:
```{r}
str(data)
```
`gender_num` and `sepsis_flg` should also be factors:
```{r}
data$gender_num <- as.factor(data$gender_num)
data$sepsis_flg <- as.factor(data$sepsis_flg)

data[,c("gender_num", "sepsis_flg")] %>% str()
```
`sepsis_flg` will not be useful in our analysis, since all the values are the same
(it has zero variance). We can therefore drop it from our data:
```{r}
data <- data %>% select(!sepsis_flg)
```

Our main question is: Which of the available variables in the data set are useful
for predicting death within 28 days, after the use of an indwelling arterial catheter (IAC)?

It is important to note that these risk factors will likely not be very specififc
for the use of AIC but might be just general risk factors.

Are there sufficient records for patients on which an IAC was used?
```{r}
table(data$aline_flg)
```
Subset the data and drop the `aline_flg` variable:
```{r}
data_sub <- data %>% filter(aline_flg == 1) %>% 
        select(!aline_flg)
```


- Missingnes map

- Use vif to assess multicolinearity.